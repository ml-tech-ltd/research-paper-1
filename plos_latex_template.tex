% Template for PLoS
% Version 3.5 March 2018
%
% % % % % % % % % % % % % % % % % % % % % %
%
% -- IMPORTANT NOTE
%
% This template contains comments intended 
% to minimize problems and delays during our production 
% process. Please follow the template instructions
% whenever possible.
%
% % % % % % % % % % % % % % % % % % % % % % % 
%
% Once your paper is accepted for publication, 
% PLEASE REMOVE ALL TRACKED CHANGES in this file 
% and leave only the final text of your manuscript. 
% PLOS recommends the use of latexdiff to track changes during review, as this will help to maintain a clean tex file.
% Visit https://www.ctan.org/pkg/latexdiff?lang=en for info or contact us at latex@plos.org.
%
%
% There are no restrictions on package use within the LaTeX files except that 
% no packages listed in the template may be deleted.
%
% Please do not include colors or graphics in the text.
%
% The manuscript LaTeX source should be contained within a single file (do not use \input, \externaldocument, or similar commands).
%
% % % % % % % % % % % % % % % % % % % % % % %
%
% -- FIGURES AND TABLES
%
% Please include tables/figure captions directly after the paragraph where they are first cited in the text.
%
% DO NOT INCLUDE GRAPHICS IN YOUR MANUSCRIPT
% - Figures should be uploaded separately from your manuscript file. 
% - Figures generated using LaTeX should be extracted and removed from the PDF before submission. 
% - Figures containing multiple panels/subfigures must be combined into one image file before submission.
% For figure citations, please use "Fig" instead of "Figure".
% See http://journals.plos.org/plosone/s/figures for PLOS figure guidelines.
%
% Tables should be cell-based and may not contain:
% - spacing/line breaks within cells to alter layout or alignment
% - do not nest tabular environments (no tabular environments within tabular environments)
% - no graphics or colored text (cell background color/shading OK)
% See http://journals.plos.org/plosone/s/tables for table guidelines.
%
% For tables that exceed the width of the text column, use the adjustwidth environment as illustrated in the example table in text below.
%
% % % % % % % % % % % % % % % % % % % % % % % %
%
% -- EQUATIONS, MATH SYMBOLS, SUBSCRIPTS, AND SUPERSCRIPTS
%
% IMPORTANT
% Below are a few tips to help format your equations and other special characters according to our specifications. For more tips to help reduce the possibility of formatting errors during conversion, please see our LaTeX guidelines at http://journals.plos.org/plosone/s/latex
%
% For inline equations, please be sure to include all portions of an equation in the math environment.  For example, x$^2$ is incorrect; this should be formatted as $x^2$ (or $\mathrm{x}^2$ if the romanized font is desired).
%
% Do not include text that is not math in the math environment. For example, CO2 should be written as CO\textsubscript{2} instead of CO$_2$.
%
% Please add line breaks to long display equations when possible in order to fit size of the column. 
%
% For inline equations, please do not include punctuation (commas, etc) within the math environment unless this is part of the equation.
%
% When adding superscript or subscripts outside of brackets/braces, please group using {}.  For example, change "[U(D,E,\gamma)]^2" to "{[U(D,E,\gamma)]}^2". 
%
% Do not use \cal for caligraphic font.  Instead, use \mathcal{}
%
% % % % % % % % % % % % % % % % % % % % % % % % 
%
% Please contact latex@plos.org with any questions.
%
% % % % % % % % % % % % % % % % % % % % % % % %

\documentclass[10pt,letterpaper]{article}
\usepackage[top=0.85in,left=2.75in,footskip=0.75in]{geometry}

% amsmath and amssymb packages, useful for mathematical formulas and symbols
\usepackage{amsmath,amssymb}

% Use adjustwidth environment to exceed column width (see example table in text)
\usepackage{changepage}

% Use Unicode characters when possible
\usepackage[utf8x]{inputenc}

% textcomp package and marvosym package for additional characters
\usepackage{textcomp,marvosym}

% cite package, to clean up citations in the main text. Do not remove.
\usepackage{cite}

% Use nameref to cite supporting information files (see Supporting Information section for more info)
\usepackage{nameref,hyperref}

% line numbers
\usepackage[right]{lineno}

% ligatures disabled
\usepackage{microtype}
\DisableLigatures[f]{encoding = *, family = * }

% color can be used to apply background shading to table cells only
\usepackage[table]{xcolor}

% array package and thick rules for tables
\usepackage{array}

% create "+" rule type for thick vertical lines
\newcolumntype{+}{!{\vrule width 2pt}}

% create \thickcline for thick horizontal lines of variable length
\newlength\savedwidth
\newcommand\thickcline[1]{%
  \noalign{\global\savedwidth\arrayrulewidth\global\arrayrulewidth 2pt}%
  \cline{#1}%
  \noalign{\vskip\arrayrulewidth}%
  \noalign{\global\arrayrulewidth\savedwidth}%
}

% \thickhline command for thick horizontal lines that span the table
\newcommand\thickhline{\noalign{\global\savedwidth\arrayrulewidth\global\arrayrulewidth 2pt}%
\hline
\noalign{\global\arrayrulewidth\savedwidth}}


% Remove comment for double spacing
%\usepackage{setspace} 
%\doublespacing

% Text layout
\raggedright
\setlength{\parindent}{0.5cm}
\textwidth 5.25in 
\textheight 8.75in

% Bold the 'Figure #' in the caption and separate it from the title/caption with a period
% Captions will be left justified
\usepackage[aboveskip=1pt,labelfont=bf,labelsep=period,justification=raggedright,singlelinecheck=off]{caption}
\renewcommand{\figurename}{Fig}

% Use the PLoS provided BiBTeX style
\bibliographystyle{plos2015}

% Remove brackets from numbering in List of References
\makeatletter
\renewcommand{\@biblabel}[1]{\quad#1.}
\makeatother



% Header and Footer with logo
\usepackage{lastpage,fancyhdr,graphicx}
\usepackage{epstopdf}
%\pagestyle{myheadings}
\pagestyle{fancy}
\fancyhf{}
%\setlength{\headheight}{27.023pt}
%\lhead{\includegraphics[width=2.0in]{PLOS-submission.eps}}
\rfoot{\thepage/\pageref{LastPage}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrule}{\hrule height 2pt \vspace{2mm}}
\fancyheadoffset[L]{2.25in}
\fancyfootoffset[L]{2.25in}
\lfoot{\today}

%% Include all macros below

\newcommand{\lorem}{{\bf LOREM}}
\newcommand{\ipsum}{{\bf IPSUM}}

%% END MACROS SECTION


\begin{document}
\vspace*{0.2in}

% Title must be 250 characters or less.
\begin{flushleft}
{\Large
\textbf\newline{Using intuitionistic fuzzy inference systems for the creation of an agent-based financial market model} % Please use "sentence case" for title and headings (capitalize only the first word in a title (or heading), the first word in a subtitle (or subheading), and any proper nouns).
}
\newline
% Insert author names, affiliations and corresponding author email (do not include titles, positions, or degrees).
\\
Amaury Hernandez-Aguila\textsuperscript{1,2\Yinyang},
Mario Garcia-Valdez\textsuperscript{2\Yinyang}
% Name3 Surname\textsuperscript{2,3\textcurrency},
% Name4 Surname\textsuperscript{2},
% Name5 Surname\textsuperscript{2\ddag},
%Name6 Surname\textsuperscript{2\ddag},
% Name7 Surname\textsuperscript{1,2,3*},
%with the Lorem Ipsum Consortium\textsuperscript{\textpilcrow}
\\
\bigskip
\textbf{1} Affiliation Dept/Program/Center, Institution Name, City, State, Country
\\
\textbf{2} Affiliation Dept/Program/Center, Institution Name, City, State, Country
\\
\textbf{3} Affiliation Dept/Program/Center, Institution Name, City, State, Country
\\
\bigskip

% Insert additional author notes using the symbols described below. Insert symbol callouts after author names as necessary.
% 
% Remove or comment out the author notes below if they aren't used.
%
% Primary Equal Contribution Note
\Yinyang These authors contributed equally to this work.

% Additional Equal Contribution Note
% Also use this double-dagger symbol for special authorship notes, such as senior authorship.
\ddag These authors also contributed equally to this work.

% Current address notes
\textcurrency Current Address: Dept/Program/Center, Institution Name, City, State, Country % change symbol to "\textcurrency a" if more than one current address note
% \textcurrency b Insert second current address 
% \textcurrency c Insert third current address

% Deceased author note
\dag Deceased

% Group/Consortium Author Note
\textpilcrow Membership list can be found in the Acknowledgments section.

% Use the asterisk to denote corresponding authorship and provide email address in note below.
* correspondingauthor@institute.edu

\end{flushleft}
% Please keep the abstract below 300 words
\section*{Abstract}
This paper describes a particular way of using intuitionistic fuzzy inference systems (IFIS) as the rules to be followed by agents in an agent-based financial market model. The intuitionistic fuzzy rules (IFR) can be used to describe the agents' beliefs, while using the price movements of a financial market as the facts perceived by the agents. For this paper, the price movements are preprocessed using several technical indicators whose calculations are used as inputs for the IFIS of each agent in the model, and thus, the technical indicators' calculations describe the agents' environment. The agents' actions correspond to buy or sell orders which are used to create a simulation of a real financial market. A genetic algorithm is used to find combinations of IFR that allow the agents to simulate a close representation of a financial market. Lastly, after the agent model has been adjusted to the real financial market price movements, the IFR are examined to obtain explanatory insight about the targeted financial market.


% Please keep the Author Summary between 150 and 200 words
% Use first person. PLOS ONE authors please skip this step. 
% Author Summary not valid for PLOS ONE submissions.   
%\section*{Author summary}
%Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eget porta erat. Morbi consectetur est %vel gravida pretium. Suspendisse ut dui eu ante cursus gravida non sed sem. Nullam sapien tellus, commodo %id velit id, eleifend volutpat quam. Phasellus mauris velit, dapibus finibus elementum vel, pulvinar non %tellus. Nunc pellentesque pretium diam, quis maximus dolor faucibus id. Nunc convallis sodales ante, ut %ullamcorper est egestas vitae. Nam sit amet enim ultrices, ultrices elit pulvinar, volutpat risus.

\linenumbers

% Use "Eq" instead of "Equation" for equation citations.
\section*{Introduction}

A financial market is constructed by the interaction of a number of traders, where a trader is an entity that is able to buy or sell a number of units of an asset. The entities defined as traders can either be individual human beings, organizations or even computer programs. An asset can be anything that can be priced and can be divided so different parties can hold a share of the asset. For example, corn can be priced and different parties can hold a share of the corn market by physically owning corn. Lastly, traders can decide to either buy or sell shares of this asset. Although this decision can seem simple, as there can only be two outcomes, the process a trader can follow in order to arrive to an outcome can be very complex.

In theory, if one can know all the variables that each trader is taking into consideration to arrive to their particular decisions, the prices in a financial market can be precisely predicted. Obviously, this is impossible, unless we were simulating a financial market with a handful of people and everyone was telling everyone else what decisions they are going to take. Nevertheless, one can create models that closely simulate a financial market, and one can assume that these simulations are generalizations of the real financial market. Several approaches have been taken in the past to create such models with varying success. One of the simplest methods to forecast the prices in a financial market is linear regression \cite{kutner2004applied}, where one is trying to find a function of the form $f(x) = a + bx$ -- or simply a linear function -- that minimizes the distance between the points in the line and the points that represent the prices. Even though linear regression can provide valuable insight, such as determining the general direction of a market in a determined period of time, it is not suitable to be taken as a complete solution to forecasting.

A better approach to using mathematical formulas to forecast a financial market is to use technical indicators such as the relative strength index or the commodity selection index \cite{Wilder1978}. These technical indicators are used to perform a technique called technical analysis, where one tries to identify what are going to be the future price movements of a market relying solely on the historical prices of the market being analyzed. For example, if a market's prices have been increasing relatively too much in a relatively short period of time, according to technical analysis this market is now considered \textit{overbought}, and the prices could start to violently fall at any moment. It is worth noting that these analyses are often subject to interpretation, i.e. they are subjective analyses. Additionally, these analyses are heuristic, as the trader's experience is heavily involved in the interpretation of the results thrown by the technical indicators.

One method that does not need interpretation, unlike technical analysis, and that creates a model that tries to simulate a financial market, like linear regression, is artificial neural networks (ANN). ANN-based models are created by using a series of data points -- in the case of financial markets, these data points are historical prices -- as a training set, which is used to adjust weights in the neurons that constitute the ANN. In the end, an ANN is just a very complex mathematical formula that, given an input, one obtains an output, which in the case of a financial market, that output is a price at a given time. Although ANNs can generate models that successfully simulate financial markets, interpreting the model is sometimes desired, as one can obtain insight that can help to better understand a market's behavior, and ANNs fail to accomplish this goal.

Agent-based models satisfy two criteria: they are interpretable, as one can examine what are the rules and beliefs that conveyed an agent to a particular decision; and they can simulate a financial market, which helps to provide a model that is closely related to that market's behavior, unlike technical indicators. Furthermore, the agents in an agent-based model can use the outputs from several technical indicators as the environment that works as the input to their rules, instead of using the raw historical prices, which already implies that agent-based models can act in a higher order of complexity than technical indicators. For example, the historical prices of a financial market can be pre-processed using technical indicators, and these will serve as the basis for the agents' beliefs, such as believing if a market is overbought or oversold, or if the volatility is too high or too low.

The representation of an agents' beliefs and rules can be achieved through traditional (Boolean) logic, for example: \textit{if relative strength index is greater than 20, then buy}. Nevertheless, fuzzy logic can help to achieve a greater level of detail for the creation of the agents' rules and beliefs. The aforementioned example rule can then be extended to \textit{if relative strength index is low, then buy a big lot}. As can be noted, just as one can use fuzzy logic to create fuzzy inference systems, the agents' actions can also be represented by fuzzy rules.

The preceding paragraphs serve as a description of the motivation behind the proposed method in this work: using fuzzy inference systems for the creation of agent-based models. However, the reader will find in Section \ref{section:proposed-method} that the proposed method does not use traditional fuzzy systems, but intuitionistic fuzzy systems \cite{Atanassov1986}, which have the objective of better representing the knowledge and decisions of a human trader. Before better examining the method for constructing such agent-based models, a series of related works is presented in Section \ref{section:related-work}, which help the reader to understand the advantages that the proposed method in this work provides in contrast to other already existing techniques. After understanding the theoretical background of the method, the reader can find an implementation of the method in Section \ref{section:implementation}.

\section*{Preliminaries}

Nullam Eq~(\ref{eq:schemeP}) sapien tellus, commodo id velit id, eleifend volutpat quam. Phasellus mauris velit, dapibus finibus elementum vel, pulvinar non tellus. Nunc pellentesque pretium diam, quis maximus dolor faucibus id.~\cite{bib2} Nunc risus.

\begin{eqnarray}
\label{eq:schemeP}
	\mathrm{P_Y} = \underbrace{H(Y_n) - H(Y_n|\mathbf{V}^{Y}_{n})}_{S_Y} + \underbrace{H(Y_n|\mathbf{V}^{Y}_{n})- H(Y_n|\mathbf{V}^{X,Y}_{n})}_{T_{X\rightarrow Y}},
\end{eqnarray}

\section*{Materials and methods}
\subsection*{Etiam eget sapien nibh}

% For figure citations, please use "Fig" instead of "Figure".
Nulla mi mi, Fig~\ref{fig1} cursus, \nameref{S1_Video} vel sagittis arcu lobortis.

% Place figure captions after the first paragraph in which they are cited.
\begin{figure}[!h]
\caption{{\bf Bold the figure title.}
Figure caption text here, please use this space for the figure panel descriptions instead of using subfigure commands. A: Lorem ipsum dolor sit amet. B: Consectetur adipiscing elit.}
\label{fig1}
\end{figure}

% Results and Discussion can be combined.
\section*{Results}
Nulla mi mi, Table~\ref{table1} libero.

% Place tables after the first paragraph in which they are cited.
\begin{table}[!ht]
\begin{adjustwidth}{-2.25in}{0in} % Comment out/remove adjustwidth environment if table fits in text column.
\centering
\caption{
{\bf Table caption Nulla mi mi, venenatis sed ipsum varius, volutpat euismod diam.}}
\begin{tabular}{|l+l|l|l|l|l|l|l|}
\hline
\multicolumn{4}{|l|}{\bf Heading1} & \multicolumn{4}{|l|}{\bf Heading2}\\ \thickhline
$cell1 row1$ & cell2 row 1 & cell3 row 1 & cell4 row 1 & cell5 row 1 & cell6 row 1 & cell7 row 1 & cell8 row 1\\ \hline
$cell1 row2$ & cell2 row 2 & cell3 row 2 & cell4 row 2 & cell5 row 2 & cell6 row 2 & cell7 row 2 & cell8 row 2\\ \hline
$cell1 row3$ & cell2 row 3 & cell3 row 3 & cell4 row 3 & cell5 row 3 & cell6 row 3 & cell7 row 3 & cell8 row 3\\ \hline
\end{tabular}
\begin{flushleft} Table notes Phasellus venenatis, tortor nec vestibulum mattis, massa tortor interdum felis, nec pellentesque metus tortor nec nisl. Ut ornare mauris tellus, vel dapibus arcu suscipit sed.
\end{flushleft}
\label{table1}
\end{adjustwidth}
\end{table}


%PLOS does not support heading levels beyond the 3rd (no 4th level headings).
\subsection*{\lorem\ and \ipsum\ nunc blandit a tortor}
\subsubsection*{3rd level heading} 
Maecenas feugiat. 

\begin{enumerate}
	\item{react}
	\item{diffuse free particles}
	\item{increment time by dt and go to 1}
\end{enumerate}


\subsection*{Sed ac quam id nisi malesuada congue}

\begin{itemize}
	\item First bulleted item.
	\item Second bulleted item.
	\item Third bulleted item.
\end{itemize}

\section*{Discussion}
Table~\ref{table1} libero~\cite{bib3}.

\section*{Conclusion}

CO\textsubscript{2} see \nameref{S1_Appendix}.

\cite{Akram2014}
\cite{Atanassov1986}
\cite{Boer-Sorban2008}
\cite{Castillo2017}
\cite{Chen2001}
\cite{Cornelis2004}
\cite{De2001}
\cite{Dengfeng2002}
\cite{Deschrijver2004}
\cite{Despi2013}
\cite{Hernandez-Aguila2017}
\cite{Hernandez-Aguila2017-2}
\cite{Hernandez-Aguila2016}
\cite{Homaifar1995}
\cite{Huang2009}
\cite{Jennings2001}
\cite{Keen1980}
\cite{Mamdani1975}
\cite{Niazi2011}
\cite{Own2009}
\cite{Szmidt2001}
\cite{Takagi1985}
\cite{Thrift1991}
\cite{Tsang2004}
\cite{Vora2011}
\cite{Wagner2013}
\cite{Xu2007}
\cite{Zadeh1965}

\section*{Supporting information}

% Include only the SI item label in the paragraph heading. Use the \nameref{label} command to cite SI items in the text.
\paragraph*{S1 Fig.}
\label{S1_Fig}
{\bf Bold the title sentence.} Add descriptive text after the title of the item (optional).

\paragraph*{S2 Fig.}
\label{S2_Fig}
{\bf Lorem ipsum.} Maecenas convallis mauris sit amet sem ultrices gravida. Etiam eget sapien nibh. Sed ac ipsum eget enim egestas ullamcorper nec euismod ligula. Curabitur fringilla pulvinar lectus consectetur pellentesque.

\paragraph*{S1 File.}
\label{S1_File}
{\bf Lorem ipsum.}  Maecenas convallis mauris sit amet sem ultrices gravida. Etiam eget sapien nibh. Sed ac ipsum eget enim egestas ullamcorper nec euismod ligula. Curabitur fringilla pulvinar lectus consectetur pellentesque.

\paragraph*{S1 Video.}
\label{S1_Video}
{\bf Lorem ipsum.}  Maecenas convallis mauris sit amet sem ultrices gravida. Etiam eget sapien nibh. Sed ac ipsum eget enim egestas ullamcorper nec euismod ligula. Curabitur fringilla pulvinar lectus consectetur pellentesque.

\paragraph*{S1 Appendix.}
\label{S1_Appendix}
{\bf Lorem ipsum.} Maecenas convallis mauris sit amet sem ultrices gravida. Etiam eget sapien nibh. Sed ac ipsum eget enim egestas ullamcorper nec euismod ligula. Curabitur fringilla pulvinar lectus consectetur pellentesque.

\paragraph*{S1 Table.}
\label{S1_Table}
{\bf Lorem ipsum.} Maecenas convallis mauris sit amet sem ultrices gravida. Etiam eget sapien nibh. Sed ac ipsum eget enim egestas ullamcorper nec euismod ligula. Curabitur fringilla pulvinar lectus consectetur pellentesque.

\section*{Acknowledgments}
Cras egestas velit mauris, eu mollis turpis pellentesque sit amet. Interdum et malesuada fames ac ante ipsum primis in faucibus. Nam id pretium nisi. Sed ac quam id nisi malesuada congue. Sed interdum aliquet augue, at pellentesque quam rhoncus vitae.

\nolinenumbers

% Either type in your references using
% \begin{thebibliography}{}
% \bibitem{}
% Text
% \end{thebibliography}
%
% or
%
% Compile your BiBTeX database using our plos2015.bst
% style file and paste the contents of your .bbl file
% here. See http://journals.plos.org/plosone/s/latex for 
% step-by-step instructions.
% 
%% \begin{thebibliography}{10}

%% \bibitem{bib1}
%% Conant GC, Wolfe KH.
%% \newblock {{T}urning a hobby into a job: how duplicated genes find new
%%   functions}.
%% \newblock Nat Rev Genet. 2008 Dec;9(12):938--950.

%% \bibitem{bib2}
%% Ohno S.
%% \newblock Evolution by gene duplication.
%% \newblock London: George Alien \& Unwin Ltd. Berlin, Heidelberg and New York:
%%   Springer-Verlag.; 1970.

%% \bibitem{bib3}
%% Magwire MM, Bayer F, Webster CL, Cao C, Jiggins FM.
%% \newblock {{S}uccessive increases in the resistance of {D}rosophila to viral
%%   infection through a transposon insertion followed by a {D}uplication}.
%% \newblock PLoS Genet. 2011 Oct;7(10):e1002337.

%% \end{thebibliography}

\bibliography{bibliography}
\bibliographystyle{plain}

\end{document}

